<!DOCTYPE html>
<html lang="ko">
<head>
    <title>FURMILLY CARE</title>
    <link rel="stylesheet" href="home.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100..900&display=swap" rel="stylesheet">
    <meta charset="utf-8">
    <meta http-equiv="imagetoolbar" content="no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
</head>
<style>
    body{
        overflow-y: auto;
    }
    .pagesize {
        width: 70%; /* 전체 너비를 70%로 설정 */
        margin: 0 auto; /* 왼쪽과 오른쪽 마진을 자동으로 설정하여 가운데로 정렬 */
        position: relative;
        height: 100%; /* 전체 높이 설정 */
    }
    .basicviewforset{
        background-color: #f4f7f6;
        border: 2px solid #7CAE7A;
        border-radius: 10px;
        padding: 5px;
    }
    .firstselection{
        display: flex;
        margin-left: 20px;
        margin-right: 20px;
        justify-content: space-between;
        align-items: center;
    }
    .addpetlist{
        background-color: gainsboro;
        margin-left: 22px;
        margin-right: 22px;
        display: none;
    }
    .petprofile{
        background-color: #ffffff;
        border: 2px solid #afd485;
        border-radius: 10px;
        padding: 5px;
        margin-left: 20px;
        margin-right: 20px;
    }
</style>
<body>
    <div class="pagesize"> <!--전체 페이지 사이즈 -->
        <div class="overlay"></div> <!-- 검은색 반투명 레이어 -->
        <div class="linkusr">
            <a href="login.html">로그인</a>
            <a href="signup.html">회원가입</a>
        </div>
        <header class="header">
            <div class="logo">
                <a href="main.html"><img src="logo.png" alt="logo"></a>
            </div>
        </header>
        <div class="menu">
            <nav class="clearfix">
                <ul class="clearfix">
                    <li id = "li1"><a id = "list1" href="guide.html">초보집사 가이드</a>
                        <ul class="sub-menu">
                            <li id = "uf1"><a href="dguide.html">강아지 가이드</a></li>
                            <li id = "uf2"><a href="cguide.html">고양이 가이드</a></li>
                            <li id = "uf3"><a href="oguide.html">기타 동물 가이드</a></li>
                        </ul>
                    </li>
                    <li id = "li2"><a id = "list2" href="shophome.html">반려동물 생활용품</a>
                        <ul class="sub-menu">
                            <li id = "uf4"><a href="foodshop.html">사료</a></li>
                            <li id = "uf5"><a href="toyshop.html">장난감</a></li>
                            <li id = "uf6"><a href="shopelse.html">기타 생활 용품</a></li>
                        </ul>
                    </li>
                    <li id = "li3"><a id = "list3" href="care.html">반려동물 관리</a>
                        <ul class="sub-menu">
                            <li id = "uf7"><a href="deepcare.html">상세 관리</a></li>
                        </ul>
                    </li>
                </ul>
            </nav>
        </div>
        <br><br>
        <div class = "basicviewforset">
            <div class = "firstselection">
                <p>Furmilly Profile</p>
                <button id = "btnforaddpetlist">추가하기</button>
            </div>
            <script>
                document.getElementById("btnforaddpetlist").addEventListener('click',function(){
                    var adpetlistDiv = document.getElementById("adpetlist");
                    var btn = document.getElementById("btnforaddpetlist");

                    if (adpetlistDiv.style.display == 'none'){
                        adpetlistDiv.style.display = 'block'
                        btn.textContent = "닫기"
                    }
                    else {
                        adpetlistDiv.style.display = 'none'
                        btn.textContent = "추가하기"
                    }
                })
            </script>
            <div id = "adpetlist" class = "addpetlist">
                <p style="margin-left: 23px;">이미지 선택</p>
                <input style = "margin-left: 23px;" type="file" id="profileImage" name="profileImage" accept="image/*" onchange="getImageLink(event)"><br><br>        
                <div style class="preview">
                    <img id="imagePreview" src="#" alt="프로필 이미지" style="max-width: 300px; display: none;">
                    <p id="imageLink"></p>
                </div>
                <label style="margin-left: 22pt;">이름 : </label>
                <input type = "text" id ="nameofpet"><br>
                <label style="margin-left: 22pt;">(선택)종: </label>
                <input type = "text" id ="breedofpet"><br>
                <label style="margin-left: 22pt;">(선택)나이 : </label>
                <input type = "text" id ="ageofpet"><br>
                <label style="margin-left: 22pt;">(선택)생일 : </label>
                <input type = "text" id ="birthofpet"><br>
                <label style="margin-left: 22pt;">성별 : </label>
                <select id ="sexofpet">
                    <option value = "male"> 남 </option>
                    <option value = "female"> 여 </option>
                    <option value = "nose" selected> X </option>
                </select><br><br><br>
                <button id = "realaddbtnforadpetlist" style = "margin-left: 22px;">프로필 추가하기</button>
            </div>
            <div id = "petprofile"></div>
            <script>
                function getImageLink() {
                    var input = document.getElementById("profileImage");
                    if (!input.files || input.files.length === 0) {
                        return;
                    }
                    
                    var file = input.files[0];
                    var reader = new FileReader();
        
                    reader.onload = function(e) {
                        var imageUrl = e.target.result;
                        document.getElementById("imagePreview").src = imageUrl;
                        document.getElementById("imagePreview").style.display = "block";
                    };
        
                    reader.readAsDataURL(file);
                }

                document.getElementById("realaddbtnforadpetlist").addEventListener("click",function(){
                    var petname = document.getElementById("nameofpet").value;
                    var petbreed = document.getElementById("breedofpet").value;
                    var petage = document.getElementById("ageofpet").value;
                    var petbirth = document.getElementById("birthofpet").value;
                    var petsex = document.getElementById("sexofpet").value;
                    var imageURL = document.getElementById("imagePreview").src;
                    if (imageURL === "#" || !imageURL){
                        alert("이미지를 선택해주세요.");
                        return;
                    }

                    var newDiv = document.createElement("div");
                    newDiv.classList.add("petprofile");
                    
                    var imgElement = document.createElement("img");
                    imgElement.src = imageURL;
                    imgElement.style.float = 'left';
                    newDiv.appendChild(imgElement);


                    var detailsDiv = document.createElement("div");
                    imgElement.onload = function(){
                        var forheight = imgElement.height;
                        detailsDiv.style.height = forheight+'px';
                        detailsDiv.classList.add("petdetails");
                        detailsDiv.style.alignItems = 'center';
                    }

                    var deleteElement = document.createElement("button");
                    deleteElement.textContent = "삭제";
                    deleteElement.style.float = 'right';
                    deleteElement.onclick = function(){
                        document.getElementById("petprofile").removeChild(newDiv);
                    }
                    newDiv.appendChild(deleteElement);

                    var nameElement = document.createElement("p");
                    nameElement.textContent = "이름: " + (petname ? petname : '');
                    detailsDiv.appendChild(nameElement);

                    var breedElement = document.createElement("p");
                    breedElement.textContent = "종: " + (petbreed? petbreed : '');
                    detailsDiv.appendChild(breedElement);

                    var ageElement = document.createElement("p");
                    ageElement.textContent = "나이: " + (petage? petage : '');
                    detailsDiv.appendChild(ageElement);

                    var birthElement = document.createElement("p");
                    birthElement.textContent = "생일: " + (petbirth? petbirth : '');
                    detailsDiv.appendChild(birthElement);

                    var sexElement = document.createElement("p");
                    sexElement.textContent = "성별: " + (petsex == "male" ? "남" : petsex == "female" ? "여" : "X");
                    detailsDiv.appendChild(sexElement);

                    newDiv.appendChild(detailsDiv);

                    document.getElementById("petprofile").appendChild(newDiv);
                
                    document.getElementById("nameofpet").value = "";
                    document.getElementById("breedofpet").value = "";
                    document.getElementById("ageofpet").value = "";
                    document.getElementById("birthofpet").value = "";
                    document.getElementById("sexofpet").value = "nose";
                    document.getElementById("profileImage").value = "";
                    document.getElementById("imagePreview").style.display = 'none';
                    document.getElementById("adpetlist").style.display = 'none';
                    document.getElementById("btnforaddpetlist").textContent = "추가하기";
                });
            </script>
        </div>
    </div>
</body>
</html>
