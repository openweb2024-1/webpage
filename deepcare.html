<!DOCTYPE html>
<html lang="ko">
<head>
    <title>FURMILLY DEEPCARE</title>
    <link rel="stylesheet" href="home.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100..900&display=swap" rel="stylesheet">
    <meta charset="utf8">
    <meta http-equiv="imagetoolbar" content="no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <style>
        body{
            overflow-y: auto;
        }
        .pagesize {
            width: 70%; /* 전체 너비를 70%로 설정 */
            margin: 0 auto; /* 왼쪽과 오른쪽 마진을 자동으로 설정하여 가운데로 정렬 */
            position: relative;
            height: 100%; /* 전체 높이 설정 */
        }
        .basicviewforset{
        background-color: #f4f7f6;
        border: 2px solid #7CAE7A;
        border-radius: 10px;
        padding: 5px;
    }
        #vaccine {
            border-collapse: collapse;
            table-layout: fixed;
            border: 1px solid black;
        }

        #vaccine th, #vaccine td {
            border: 1px solid black;
            padding: 5px;
            text-align: center;
            width:70px;
        }
        #addVacPage{
            transition: max-height 0.3s ease-out;
            max-height: 0;
            overflow: hidden;
        }
        #addVacPage.active {
            max-height: 500px; /* 충분히 큰 값으로 설정 */
        }
    </style>
</head>
<body>
    <div class="pagesize"> <!-- 전체 페이지 사이즈 -->
        <div class="overlay"></div> <!-- 검은색 반투명 레이어 -->
        <div class="linkusr">
            <a href="login.html">로그인</a>
            <a href="signup.html">회원가입</a>
        </div>
        <header class="header">
            <div class="logo">
                <a href="main.html"><img src="logo.png" alt="logo"></a>
            </div>
        </header>
        <div class="menu">
            <nav class="clearfix">
                <ul class="clearfix">
                    <li id = "li1"><a id = "list1" href="guide.html">초보집사 가이드</a>
                        <ul class="sub-menu">
                            <li id = "uf1"><a href="dguide.html">강아지 가이드</a></li>
                            <li id = "uf2"><a href="cguide.html">고양이 가이드</a></li>
                            <li id = "uf3"><a href="oguide.html">기타 동물 가이드</a></li>
                        </ul>
                    </li>
                    <li id = "li2"><a id = "list2" href="shophome.html">반려동물 생활용품</a>
                        <ul class="sub-menu">
                            <li id = "uf4"><a href="foodshop.html">사료</a></li>
                            <li id = "uf5"><a href="toyshop.html">장난감</a></li>
                            <li id = "uf6"><a href="shopelse.html">기타 생활 용품</a></li>
                        </ul>
                    </li>
                    <li id = "li3"><a id = "list3" href="care.html">반려동물 관리</a>
                        <ul class="sub-menu">
                            <li id = "uf7"><a href="deepcare.html">상세 관리</a></li>
                        </ul>
                    </li>
                </ul>
            </nav>
        </div>
        
    <br><br>
    <div class = "basicviewforset">
        <h2>접종 시기 관리</h2>
        <hr>
        <div style="padding: 10pt; border:1px solid black">
            <div>
            <table id = "vaccine" style = "position : center;">        
                <thead>
                    <tr>
                        <th width = 50px> </th>
                        <th> 1월</th>
                        <th> 2월</th>
                        <th> 3월</th>
                        <th> 4월</th>
                        <th> 5월</th>
                        <th> 6월</th>
                        <th> 7월</th>
                        <th> 8월</th>
                        <th> 9월</th>
                        <th> 10월</th>
                        <th> 11월</th>
                        <th> 12월</th>
                        <th>delete</th>
                        <th>modify</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div><br>
        <div id = "ptoclickAddVacPage" style="font-size : 14pt; cursor: pointer;" onclick="clickToAddVac()">리스트 추가 (열기)</div> 
        <div id = "addVacPage"style = "padding : 5pt; border : 1px solid black">
            <label for="vacname"><b>주사 이름 </b> </label><br>
            <input type="text" id="vacname"><br><br>
            <label for="months">접종 달</label>
            <div id="checkboxBox">
                <div>
                    <input type="checkbox" id="month1" value="1" onclick="monthschecks(1)"><label for="month1">1월</label>
                    <div id="month1date" style="display: none;">
                        <label>(선택)날짜 입력</label><input type = "text">
                    </div>
                </div>
                <div>
                    <input type="checkbox" id="month2" value="2" onclick="monthschecks(2)"><label for="month2">2월</label>
                    <div id="month2date" style="display: none;">
                        <label>(선택)날짜 입력</label><input type = "text">
                    </div>
                </div>
                <div>
                    <input type="checkbox" id="month3" value="3" onclick="monthschecks(3)"><label for="month3">3월</label>
                    <div id="month3date" style="display: none;">
                        <label>(선택)날짜 입력</label><input type = "text">
                    </div>
                </div>
                <div>
                    <input type="checkbox" id="month4" value="4" onclick="monthschecks(4)"><label for="month4">4월</label>
                    <div id="month4date" style="display: none;">
                        <label>(선택)날짜 입력</label><input type = "text">
                    </div>
                </div>
                <div>
                    <input type="checkbox" id="month5" value="5" onclick="monthschecks(5)"><label for="month5">5월</label>
                    <div id="month5date" style="display: none;">
                        <label>(선택)날짜 입력</label><input type = "text">
                    </div>
                </div>
                <div>
                    <input type="checkbox" id="month6" value="6" onclick="monthschecks(6)"><label for="month6">6월</label>
                    <div id="month6date" style="display: none;">
                        <label>(선택)날짜 입력</label><input type = "text">
                    </div>
                </div>
                <div>
                    <input type="checkbox" id="month7" value="7" onclick="monthschecks(7)"><label for="month7">7월</label>
                    <div id="month7date" style="display: none;">
                        <label>(선택)날짜 입력</label><input type = "text">
                    </div>
                </div>
                <div>
                    <input type="checkbox" id="month8" value="8" onclick="monthschecks(8)"><label for="month8">8월</label>
                    <div id="month8date" style="display: none;">
                        <label>(선택)날짜 입력</label><input type = "text">
                    </div>
                </div>
                <div>
                    <input type="checkbox" id="month9" value="9" onclick="monthschecks(9)"><label for="month9">9월</label>
                    <div id="month9date" style="display: none;">
                        <label>(선택)날짜 입력</label><input type = "text">
                    </div>
                </div>
                <div>
                    <input type="checkbox" id="month10" value="10" onclick="monthschecks(10)"><label for="month10">10월</label>
                    <div id="month10date" style="display: none;">
                        <label>(선택)날짜 입력</label><input type = "text">
                    </div>
                </div>
                <div>
                    <input type="checkbox" id="month11" value="11" onclick="monthschecks(11)"><label for="month11">11월</label>
                    <div id="month11date" style="display: none;">
                        <label>(선택)날짜 입력</label><input type = "text">
                    </div>
                </div>
                <div>
                    <input type="checkbox" id="month12" value="12" onclick="monthschecks(12)"><label for="month12">12월</label>
                    <div id="month12date" style="display: none;">
                        <label>(선택)날짜 입력</label><input type = "text">
                    </div>
                </div>
            </div>
            <button onclick="addRow()">추가</button>
        </div>
        <br>
        <div>
            <form method="post">
                <input type="hidden" name="data" id="tableData">
                <input type="submit" value="제출" onclick="submitForm()">
            </form>
        </div>
    </div>
    <br><br>
    <footer>
        <p> &copy; FURMILLY. All Rights Reserved. </p>
    </footer>
</div> <!-- 전체 페이지 사이즈 닫기 -->
    <script>
        function monthschecks(month) {
            var dateInput = document.getElementById("month" + month + "date");
            if (document.getElementById("month" + month).checked) {
                dateInput.style.display = "block";
            } else {
                dateInput.style.display = "none";
                dateInput.querySelector("input").value = ""; // 체크 해제 시 날짜 입력 초기화
            }
        }

        function addRow() {
            var table = document.getElementById("vaccine").getElementsByTagName("tbody")[0];
            var newRow = table.insertRow(table.rows.length);

            var vacname = document.getElementById("vacname").value;
            var nameCell = newRow.insertCell(0);
            nameCell.textContent = vacname;

            for (var i = 1; i <= 12; i++) {
                var monthCheckbox = document.getElementById("month" + i);
                var dateInput = document.getElementById("month" + i + "date").querySelector("input");
                var cell = newRow.insertCell(i);

                if (monthCheckbox.checked) {
                    cell.textContent = dateInput.value ? dateInput.value : "O";
                } else {
                    cell.textContent = "";
                }
            }

            // 삭제 버튼 추가
            var deleteCell = newRow.insertCell(13);
            var deleteButton = document.createElement("button");
            deleteButton.textContent = "삭제";
            deleteButton.onclick = function() {
                table.deleteRow(newRow.rowIndex - 1);
            };
            deleteCell.appendChild(deleteButton);

            // 수정 버튼 추가
            var modifyCell = newRow.insertCell(14);
            var modifyButton = document.createElement("button");
            modifyButton.textContent = "수정";
            modifyButton.onclick = function() {
                modifyRow(newRow.rowIndex - 1);
            };
            modifyCell.appendChild(modifyButton);

            // 입력 필드 초기화 및 페이지 닫기
            document.getElementById("vacname").value = "";
            for (var i = 1; i <= 12; i++) {
                var monthCheckbox = document.getElementById("month" + i);
                var dateInput = document.getElementById("month" + i + "date").querySelector("input");
                monthCheckbox.checked = false;
                dateInput.value = "";
                document.getElementById("month" + i + "date").style.display = "none";
            }
            document.getElementById("addVacPage").classList.remove("active");
            document.getElementById("ptoclickAddVacPage").innerText = "리스트 추가 (열기)";
        }

        function clickToAddVac() {
            var page = document.getElementById("addVacPage");
            if (page.classList.contains("active")) {
                page.classList.remove("active");
                document.getElementById("ptoclickAddVacPage").innerText = "리스트 추가 (열기)";
            } else {
                page.classList.add("active");
                document.getElementById("ptoclickAddVacPage").innerText = "리스트 추가 (닫기)";
            }
        }

        function submitForm() {
            var table = document.getElementById("vaccine");
            var tableData = [];
            for (var i = 1, row; row = table.rows[i]; i++) {
                var rowData = [];
                for (var j = 0, col; col = row.cells[j]; j++) {
                    rowData.push(col.innerText);
                }
                tableData.push(rowData);
            }
            document.getElementById('tableData').value = JSON.stringify(tableData);
        }
    </script>
</body>
</html>
